System.register("chunks:///_virtual/Down2048AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Down2048GameManager.ts","./Down2048Tool.ts"],(function(o){var e,n,i,t,u,s,l,a,r,c,d,p;return{setters:[function(o){e=o.inheritsLoose},function(o){n=o.cclegacy,i=o._decorator,t=o.find,u=o.assetManager,s=o.AudioClip,l=o.Slider,a=o.ProgressBar,r=o.AudioSource,c=o.Component},function(o){d=o.Down2048GameManager},function(o){p=o.Down2048Tool}],execute:function(){var g;n._RF.push({},"9855fztnO9DHp2ClwjeP2ZK","Down2048AudioManager",void 0);var h=i.ccclass;i.property,o("Down2048AudioManager",h("Down2048AudioManager")(g=function(o){function n(){for(var e,n=arguments.length,i=new Array(n),t=0;t<n;t++)i[t]=arguments[t];return(e=o.call.apply(o,[this].concat(i))||this).musicVolume=.8,e.soundVolume=.8,e.musicAudioSource=new r,e.soundAudioSource=new r,e.bgmClip=null,e.btnClickClip=null,e.downClip=null,e.mergeClip=null,e.goodClip=null,e.unbeliveableClip=null,e.gameFailClip=null,e.gameSuccessClip=null,e.gameManager=null,e.settingPopupNode=null,e}e(n,o);var i=n.prototype;return i.onLoad=function(){this.gameManager=t("Down2048GameManager").getComponent(d),this.settingPopupNode=t("Canvas/SettingPopup")},i.start=function(){this.updateProgress("sound"),this.updateProgress("music")},i.onDestroy=function(){this.musicAudioSource.stop(),this.soundAudioSource.stop()},i.loadAssert=function(){var o=this;return new Promise((function(e,n){var i={bgmClip:"bgm",btnClickClip:"btnClick",downClip:"move",mergeClip:"eliminate",goodClip:"good",unbeliveableClip:"unbeliveable",gameFailClip:"game_fail",gameSuccessClip:"game_success"},t=[];Object.keys(i).forEach((function(e){var n=i[e];t.push(new Promise((function(i,t){u.loadBundle("music",(function(u,l){u||l.load(n,s,(function(n,u){if(n)return console.log("load err:",n),void t(n);o[e]=u,i(0)}))}))})))})),Promise.all([].concat(t)).then((function(o){e(0)}))}))},i.onSliderChange=function(o,e){"sound"===e?this.soundVolume=o.progress:"music"===e&&(this.musicVolume=o.progress,this.musicAudioSource.volume=this.musicVolume),this.updateProgress(e)},i.updateProgress=function(o){"sound"===o?(this.settingPopupNode.getChildByPath("Content/Sound/Slider").getComponent(l).progress=this.soundVolume,this.settingPopupNode.getChildByPath("Content/Sound/Slider/ProgressBar").getComponent(a).progress=this.soundVolume):"music"===o&&(this.settingPopupNode.getChildByPath("Content/Music/Slider").getComponent(l).progress=this.musicVolume,this.settingPopupNode.getChildByPath("Content/Music/Slider/ProgressBar").getComponent(a).progress=this.musicVolume)},i.playBGM=function(){},i.pauseBGM=function(){this.musicAudioSource.playing&&this.musicAudioSource.pause()},i.playBtnClick=function(){0!=p.getSoundFlag()&&this.soundAudioSource.playOneShot(this.btnClickClip,this.soundVolume)},i.playDown=function(){0!=p.getSoundFlag()&&this.soundAudioSource.playOneShot(this.downClip,this.soundVolume)},i.playMerge=function(){0!=p.getSoundFlag()&&this.soundAudioSource.playOneShot(this.mergeClip,this.soundVolume)},i.playGood=function(){0!=p.getSoundFlag()&&this.soundAudioSource.playOneShot(this.goodClip,this.soundVolume)},i.playUnbeliveable=function(){0!=p.getSoundFlag()&&this.soundAudioSource.playOneShot(this.unbeliveableClip,this.soundVolume)},i.playGameFail=function(){0!=p.getSoundFlag()&&this.soundAudioSource.playOneShot(this.gameFailClip,this.soundVolume)},i.playGameSuccess=function(){0!=p.getSoundFlag()&&this.soundAudioSource.playOneShot(this.gameSuccessClip,this.soundVolume)},i.onSettingOpen=function(){this.settingPopupNode.active=!0},i.onSettingClose=function(){this.settingPopupNode.active=!1},i.update=function(o){},n}(c))||g);n._RF.pop()}}}));

System.register("chunks:///_virtual/Down2048AudioTool.ts",["cc","./Down2048Tool.ts"],(function(o){var i,u,n,s,e,t;return{setters:[function(o){i=o.cclegacy,u=o._decorator,n=o.assetManager,s=o.AudioClip,e=o.AudioSource},function(o){t=o.Down2048Tool}],execute:function(){var l,c;i._RF.push({},"0ebdf+ryDpIvoBrRNUq9VLC","Down2048AudioTool",void 0);var d=u.ccclass;u.property,o("Down2048AudioTool",d("Down2048AudioTool")(((c=function(){function o(){this.musicVolume=.8,this.soundVolume=.8,this.musicAudioSource=new e,this.soundAudioSource=new e,this.bgmClip=null,this.btnClickClip=null,this.downClip=null,this.mergeClip=null,this.goodClip=null,this.unbeliveableClip=null,this.gameFailClip=null,this.gameSuccessClip=null,this.musicAudioSource=new e,this.soundAudioSource=new e}o.getInstance=function(){return o.instance||(o.instance=new o),o.instance};var i=o.prototype;return i.loadAssert=function(){var o=this;return new Promise((function(i,u){var e={bgmClip:"bgm",btnClickClip:"btnClick",downClip:"move",mergeClip:"eliminate",goodClip:"good",unbeliveableClip:"unbeliveable",gameFailClip:"game_fail",gameSuccessClip:"game_success"},t=[];Object.keys(e).forEach((function(i){var u=e[i];t.push(new Promise((function(e,t){n.loadBundle("music",(function(n,l){n?t(n):l.load(u,s,(function(u,n){u?t(u):(o[i]=n,e(n))}))}))})))})),Promise.all(t).then(i).catch(u)}))},i.playBGM=function(){this.bgmClip?(this.musicAudioSource.clip=this.bgmClip,this.musicAudioSource.volume=this.musicVolume,this.musicAudioSource.loop=!0,this.musicAudioSource.play()):console.warn("BGM clip is not loaded.")},i.playSound=function(o){o?(this.soundAudioSource.clip=o,this.soundAudioSource.volume=this.soundVolume,this.soundAudioSource.play()):console.warn("Sound clip is not loaded.")},i.stopBGM=function(){this.musicAudioSource&&this.musicAudioSource.playing&&this.musicAudioSource.stop()},i.stopSound=function(){this.soundAudioSource&&this.soundAudioSource.playing&&this.soundAudioSource.stop()},i.pauseBGM=function(){this.musicAudioSource&&this.musicAudioSource.playing&&this.musicAudioSource.pause()},i.resumeBGM=function(){this.musicAudioSource&&!this.musicAudioSource.playing&&this.musicAudioSource.play()},i.isBGMPlaying=function(){return this.musicAudioSource&&this.musicAudioSource.playing},i.destroy=function(){this.musicAudioSource&&(this.musicAudioSource.destroy(),this.musicAudioSource=null),this.soundAudioSource&&(this.soundAudioSource.destroy(),this.soundAudioSource=null),o.instance=null},i.playBtnClick=function(){0!=t.getSoundFlag()&&this.soundAudioSource.playOneShot(this.btnClickClip,this.soundVolume)},i.playDown=function(){0!=t.getSoundFlag()&&this.soundAudioSource.playOneShot(this.downClip,this.soundVolume)},i.playMerge=function(){0!=t.getSoundFlag()&&this.soundAudioSource.playOneShot(this.mergeClip,this.soundVolume)},i.playGood=function(){0!=t.getSoundFlag()&&this.soundAudioSource.playOneShot(this.goodClip,this.soundVolume)},i.playUnbeliveable=function(){0!=t.getSoundFlag()&&this.soundAudioSource.playOneShot(this.unbeliveableClip,this.soundVolume)},i.playGameFail=function(){0!=t.getSoundFlag()&&this.soundAudioSource.playOneShot(this.gameFailClip,this.soundVolume)},i.playGameSuccess=function(){0!=t.getSoundFlag()&&this.soundAudioSource.playOneShot(this.gameSuccessClip,this.soundVolume)},o}()).instance=null,l=c))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/Down2048ColorGraphics.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var t,r,i,n,e,l,h,s,a;return{setters:[function(o){t=o.inheritsLoose},function(o){r=o.cclegacy,i=o._decorator,n=o.UITransform,e=o.Rect,l=o.Size,h=o.v2,s=o.Graphics,a=o.Component}],execute:function(){var c;r._RF.push({},"955f23LkQlJ2I6oo3ehQ2hA","Down2048ColorGraphics",void 0);var u=i.ccclass;i.property,o("Down2048ColorGraphics",u("Down2048ColorGraphics")(c=function(o){function r(){for(var t,r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];return(t=o.call.apply(o,[this].concat(i))||this).fillColor=null,t.radiusVal=10,t}t(r,o);var i=r.prototype;return i.start=function(){},i.redrawWithColor=function(o,t){void 0===t&&(t=10),this.fillColor=o,this.radiusVal=t,this.redraw()},i.redraw=function(){var o=this.node.getComponent(n).getBoundingBox(),t=new e;t.size=new l(o.width,o.height),t.center=h(.5*o.width-o.width*this.node.getComponent(n).anchorX,.5*o.height-o.height*this.node.getComponent(n).anchorY);var r=this.getComponent(s);r.clear(),r.roundRect(t.xMin,t.yMin,t.width,t.height,this.radiusVal),r.fillColor=this.fillColor,r.strokeColor=this.fillColor,r.fill(),r.stroke()},r}(a))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/Down2048GameConfig.ts",["cc"],(function(o){var n,i;return{setters:[function(o){n=o.cclegacy,i=o._decorator}],execute:function(){var r,e;n._RF.push({},"30077wduvpNIbpd8toyiZnU","Down2048GameConfig",void 0);var a=i.ccclass;i.property,o("Down2048GameConfig",a("Down2048GameConfig")(((e=function(){}).row=0,e.column=0,e.gridSize=0,e.gridMargin=0,e.downSpeed=10,e.aniGridZoomIn=0,e.aniGridZoomOut=0,e.aniColorGridDown=0,e.aniColorGridMerge=0,e.aniColorGridRemove=0,r=e))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/Down2048GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SDKManager.ts","./Down2048Tool.ts","./Down2048AudioTool.ts","./Down2048GameConfig.ts","./GameLoadPool.ts"],(function(o){var t,e,i,n,r,a,d,s,l,g,u,c,h,f,m,w,v,C,p,N,S,G,D,I,P,y,B;return{setters:[function(o){t=o.inheritsLoose,e=o.createClass},function(o){i=o.cclegacy,n=o._decorator,r=o.find,a=o.Label,d=o.Node,s=o.randomRangeInt,l=o.instantiate,g=o.UITransform,u=o.Sprite,c=o.Color,h=o.Size,f=o.tween,m=o.Widget,w=o.UIOpacity,v=o.Vec2,C=o.Vec3,p=o.Button,N=o.director,S=o.v3,G=o.Component},function(o){D=o.SDKManager},function(o){I=o.Down2048Tool},function(o){P=o.Down2048AudioTool},function(o){y=o.Down2048GameConfig},function(o){B=o.GameLoadPool}],execute:function(){var b;i._RF.push({},"43e4fCtPwZEOLlN+r8sQnKD","Down2048GameManager",void 0);var L=n.ccclass,x=(n.property,function(o){return o[o.init=0]="init",o[o.running=1]="running",o[o.end=2]="end",o[o.pause=3]="pause",o[o.remove=4]="remove",o}(x||{})),V=function(o){return o[o.notUse=0]="notUse",o[o.used=1]="used",o}(V||{});o("Down2048GameManager",L("Down2048GameManager")(b=function(o){function i(){for(var t,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return(t=o.call.apply(o,[this].concat(i))||this).row=y.row,t.column=y.column,t.gridSize=y.gridSize,t.gridMargin=y.gridMargin,t.downSpeed=y.downSpeed,t.aniGridZoomIn=y.aniGridZoomIn,t.aniGridZoomOut=y.aniGridZoomOut,t.aniColorGridDown=y.aniColorGridDown,t.aniColorGridMerge=y.aniColorGridMerge,t.aniColorGridRemove=y.aniColorGridRemove,t.maxValue=2048,t.colors={2:{bgColor:"#DBDBDB",fontColor:"#ffffff"},4:{bgColor:"#ECD19F",fontColor:"#ffffff"},8:{bgColor:"#FFA455",fontColor:"#ffffff"},16:{bgColor:"#f59563",fontColor:"#ffffff"},32:{bgColor:"#f67c5f",fontColor:"#ffffff"},64:{bgColor:"#f65e3b",fontColor:"#ffffff"},128:{bgColor:"#edcf72",fontColor:"#ffffff"},256:{bgColor:"#edcc61",fontColor:"#ffffff"},512:{bgColor:"#edc850",fontColor:"#ffffff"},1024:{bgColor:"#edc53f",fontColor:"#ffffff"},2048:{bgColor:"#edc22e",fontColor:"#ffffff"}},t.bundleName="down2048",t.gameConfig={},t.gameStatus=null,t._score=0,t.deltaTime=1,t.gridList=[],t.downGridData=null,t.autoDownFlag=!1,t.downFlag=!1,t.loopMergeList=[],t.valueFontSize=0,t.removingFlag=!1,t._nextValue=null,t._nextValue2=null,t._nextColumnIdx=null,t.adShowingFlag=!1,t.gameTipShowCount=0,t.gameBestScore=0,t.colorNodePositions=[],t.colorNode1=null,t.colorNode2=null,t.canvasNode=null,t.gridsNode=null,t.gridsColumnBGNode=null,t.colorGridsNode=null,t.runUINode=null,t.fpsLabel=null,t.scoreLabel=null,t.bestScoreLabel=null,t.gameTipNode=null,t.pausePopupNode=null,t.gameFailPopupNode=null,t.removePopupNode=null,t.removeColorGridsNode=null,t.loadingNode=null,t.nextValueBtnNode=null,t.bottomAdNode=null,t.continueView=null,t.gridPrefab="gridPrefab",t.columnBGPrefab="columnBGPrefab",t.gridPrefabStr="gridPrefab",t.columnBGPrefabStr="columnBGPrefab",t}t(i,o);var n=i.prototype;return n.setAdShowingFlag=function(o){this.adShowingFlag=o,o||this.scheduleOnce((function(){}))},n.showBottomBannerAd=function(){var o=this.bottomAdNode.getWorldPosition().y;D.showBottomBannerAd(o).then((function(){})).catch((function(){}))},n.hideBottomBanner=function(){this.scheduleOnce((function(){D.hideBottomBanner()}))},n.onLoad=function(){this.canvasNode=r("Canvas"),this.gridsNode=this.canvasNode.getChildByPath("Grids"),this.gridsColumnBGNode=this.canvasNode.getChildByPath("GridsColumnBG"),this.colorGridsNode=this.canvasNode.getChildByPath("ColorGrids"),this.runUINode=this.canvasNode.getChildByPath("RunUI"),this.runUINode.active=!1,this.scoreLabel=this.runUINode.getChildByPath("Top/CurScore/Score").getComponent(a),this.bestScoreLabel=this.runUINode.getChildByPath("Top/BestScore/Score").getComponent(a),this.gameTipNode=this.runUINode.getChildByPath("GameTip"),this.gameTipNode.active=!1,this.pausePopupNode=this.canvasNode.getChildByPath("PausePopup"),this.pausePopupNode.active=!1,this.gameFailPopupNode=this.canvasNode.getChildByPath("GameFailPopup"),this.gameFailPopupNode.active=!1,this.removePopupNode=this.canvasNode.getChildByPath("RemovePopup"),this.removePopupNode.active=!1,this.removeColorGridsNode=this.removePopupNode.getChildByPath("Content/RemoveColorGrids"),this.loadingNode=this.canvasNode.getChildByPath("Loading"),this.loadingNode.active=!1,this.nextValueBtnNode=this.runUINode.getChildByPath("Bottom/NextValue"),this.bottomAdNode=this.runUINode.getChildByPath("BottomAd"),this.continueView=this.canvasNode.getChildByPath("ContinueView"),this.continueView.active=!1,this.canvasNode.on(d.EventType.TOUCH_START,(function(o){o.preventSwallow=!0})),this.canvasNode.on(d.EventType.TOUCH_MOVE,(function(o){o.preventSwallow=!0})),this.canvasNode.on(d.EventType.TOUCH_END,(function(o){o.preventSwallow=!0})),this.canvasNode.on(d.EventType.TOUCH_CANCEL,(function(o){o.preventSwallow=!0}))},n.start=function(){var o=this.gridSize/30;this.valueFontSize=Math.floor(19*o),null!=I.getDownGame()?this.showContinueView():this.initData()},n.onDestroy=function(){this.gridsNode.destroyAllChildren(),this.gridsColumnBGNode.destroyAllChildren(),this.colorGridsNode.destroyAllChildren()},n.setGameStauts=function(o){o!==this.gameStatus&&(this.gameStatus=o,this.gameStatus===x.init?(this.runUINode.active=!0,this.gameFailPopupNode.active=!1,this.pausePopupNode.active=!1):this.gameStatus===x.running?(this.runUINode.active=!0,this.pausePopupNode.active=!1,this.removePopupNode.active=!1):this.gameStatus===x.end?this.gameFailPopupNode.active=!0:this.gameStatus===x.pause?this.pausePopupNode.active=!0:this.gameStatus===x.remove&&(this.removePopupNode.active=!0))},n.randomGetNextValue=function(){var o=[2,4,8,16,32];return o[s(0,o.length)]},n.createColorNode=function(o,t){var e=B.getInstance().getPrefab(this.gridPrefabStr),i=l(e);i.getComponent(g).setContentSize(this.gridSize-2*this.gridMargin,this.gridSize-2*this.gridMargin),i.setScale(.5,.5,.5),i.setPosition(t),i.getChildByPath("bg").getComponent(u).color=new c(this.colors[o].bgColor),this.colorGridsNode.addChild(i);var n=i.getChildByPath("Num").getComponent(a);return n.fontSize=this.valueFontSize,n.string=""+o,n.color=new c(this.colors[o].fontColor),i},n.initData=function(o){void 0===o&&(o=!1),this.setGameStauts(x.init),this.score=0,this.autoDownFlag=!1,this.downFlag=!1,this.downGridData=null,this.gridList=[],this.gridsNode.getComponent(g).setContentSize(h.ZERO),this.gridsNode.destroyAllChildren(),this.gridsColumnBGNode.destroyAllChildren(),this.loopMergeList.length=0,this.colorGridsNode.destroyAllChildren(),this.nextValueBtnNode.active=!0,this.adShowingFlag=!1;var t=I.getBestScore();this.bestScoreLabel.string=""+t,this.gameBestScore=t,o?this.restoreGameData():this.initGameData()},n.generateGrids=function(){var o=this;return new Promise((function(t,e){var i=new h(o.gridSize*o.column+2*o.gridMargin,o.gridSize*o.row+2*o.gridMargin+4);f(o.gridsNode.getComponent(g)).to(0,{contentSize:i}).call((function(){for(var e=0;e<o.row;e++){o.gridList.push([]);for(var i=0;i<o.column;i++){var n={name:"Grid-"+e+"-"+i,gridStatus:V.notUse,gridNode:null,row:e,column:i,colorInfo:null};o.gridList[e].push(n),n.gridNode=new d,o.gridsNode.addChild(n.gridNode),n.gridNode.name="Grid-"+e+"-"+i,n.gridNode.addComponent(g).setContentSize(o.gridSize,o.gridSize);var r=n.gridNode.addComponent(m);r.isAlignLeft=!0,r.left=o.gridSize*i+o.gridMargin,r.isAlignBottom=!0,r.bottom=o.gridSize*e+o.gridMargin,o.addGridEvent(n)}}o.scheduleOnce((function(){for(var e=0;e<o.column;e++){var i=l(B.getInstance().getPrefab(o.columnBGPrefabStr));o.gridsColumnBGNode.addChild(i),i.getComponent(g).setContentSize(o.gridSize-2*o.gridMargin,o.gridSize*o.row);var n=o.gridList[0][e].gridNode.getWorldPosition();n.subtract3f(0,o.gridSize/2-o.gridMargin,0),i.setWorldPosition(n)}t(!0)}))})).start()}))},n.generateGrids_restore=function(o){var t=this;return new Promise((function(o,e){var i=new h(t.gridSize*t.column+2*t.gridMargin,t.gridSize*t.row+2*t.gridMargin+4);f(t.gridsNode.getComponent(g)).to(0,{contentSize:i}).call((function(){for(var e=0;e<t.row;e++){t.gridList.push([]);for(var i=0;i<t.column;i++){var n={name:"Grid-"+e+"-"+i,gridStatus:V.notUse,gridNode:null,row:e,column:i,colorInfo:null};t.gridList[e].push(n),n.gridNode=new d,t.gridsNode.addChild(n.gridNode),n.gridNode.name="Grid-"+e+"-"+i,n.gridNode.addComponent(g).setContentSize(t.gridSize,t.gridSize);var r=n.gridNode.addComponent(m);r.isAlignLeft=!0,r.left=t.gridSize*i+t.gridMargin,r.isAlignBottom=!0,r.bottom=t.gridSize*e+t.gridMargin,t.addGridEvent(n)}}t.scheduleOnce((function(){for(var e=0;e<t.column;e++){var i=l(B.getInstance().getPrefab(t.columnBGPrefabStr));t.gridsColumnBGNode.addChild(i),i.getComponent(g).setContentSize(t.gridSize-2*t.gridMargin,t.gridSize*t.row);var n=t.gridList[0][e].gridNode.getWorldPosition();n.subtract3f(0,t.gridSize/2-t.gridMargin,0),i.setWorldPosition(n)}o(!0)}))})).start()}))},n.generateColorGrid=function(){var o=this;null===this.nextColumnIdx?(this.nextColumnIdx=s(0,this.column),this.downGridData=this.gridList[this.row-1][this.nextColumnIdx]):this.downGridData=this.gridList[this.row-1][this.nextColumnIdx];var t=this.downGridData.gridNode.getWorldPosition().add3f(0,this.gridSize,0),e=this.nextValue,i=this.colorNode1;this.downGridData.colorInfo={value:e,colorNode:i},i.setWorldPosition(t),i.setScale(1,1,1),this.autoDownFlag=!0;var n=this.colorNode2.getComponent(w);f(this.colorNode2).parallel(f().to(.15,{position:this.colorNodePositions[0]},{easing:"quadOut"}),f(n).to(.15,{opacity:255})).call((function(){o.nextValue=o.nextValue2,o.colorNode1=o.colorNode2,o.nextValue2=o.randomGetNextValue(),o.colorNode2=o.createColorNode(o.nextValue2,o.colorNodePositions[1]),o.colorNode2.getComponent(w).opacity=0})).start(),this.downGridData.gridStatus=V.used},n.addColorGridEvent=function(o){var t=this;o.on(d.EventType.TOUCH_END,(function(e){if(t.gameStatus===x.remove){for(var i=null,n=0;n<t.row;n++)for(var r=0;r<t.column;r++){var a=t.gridList[n][r];a.gridStatus===V.used&&a.colorInfo.colorNode===o&&(i=a)}i!==t.downGridData&&t.removeColorGrid(i)}}))},n.addGridEvent=function(o){var t=this,e=o.gridNode;e.on(d.EventType.TOUCH_START,(function(e){t.gameStatus!==x.running||t.downFlag||t.adShowingFlag||(t.gameTipNode.active=!1,t.downColorGridMove(o))}),this),e.on(d.EventType.TOUCH_MOVE,(function(o){if(t.gameStatus===x.running&&!t.downFlag&&!t.adShowingFlag){for(var e=null,i=0;i<t.row;i++)for(var n=0;n<t.column;n++){var r=t.gridList[i][n],a=r.gridNode.getWorldPosition().toVec2();v.distance(a,o.getUILocation())<=t.gridSize/2&&(e=r)}null!==e&&t.downGridData.column!==e.column&&t.downColorGridMove(e)}}),this),e.on(d.EventType.TOUCH_END,this.onTouchEnd,this),e.on(d.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},n.onTouchEnd=function(o){var t=this;if(this.gameStatus===x.running&&!this.downFlag&&!this.adShowingFlag){this.downFlag=!0;for(var e=this.downGridData.row;e>0&&this.gridList[e-1][this.downGridData.column].gridStatus!==V.used;)e-=1;this.autoDownFlag=!1;var i=this.gridList[e][this.downGridData.column];f(this.downGridData.colorInfo.colorNode).to(this.aniColorGridDown,{worldPosition:i.gridNode.getWorldPosition()}).call((function(){t.downGridData!==i&&(i.colorInfo=t.downGridData.colorInfo,i.gridStatus=V.used,t.downGridData.colorInfo=null,t.downGridData.gridStatus=V.notUse,t.downGridData=i),t.downEnd()})).start()}},n.downColorGridMove=function(o){if(this.downGridData.column!==o.column){for(var t=o.column-this.downGridData.column<0,e=this.downGridData.column;e!==o.column;){if(this.gridList[this.downGridData.row][t?e-1:e+1].gridStatus===V.used)break;t?e-=1:e+=1}if(e!==this.downGridData.column){this.nextColumnIdx=e;var i=this.gridList[this.downGridData.row][e];i.colorInfo=this.downGridData.colorInfo,i.gridStatus=V.used,this.downGridData.colorInfo=null,this.downGridData.gridStatus=V.notUse,this.downGridData=i;var n=this.downGridData.colorInfo.colorNode.getWorldPosition();n.x=this.downGridData.gridNode.getWorldPosition().x,this.downGridData.colorInfo.colorNode.setWorldPosition(n),this.saveGameData()}}},n.downEnd=function(){this.autoDownFlag=!1,this.downGridData.colorInfo.colorNode.setWorldPosition(this.downGridData.gridNode.getWorldPosition()),P.getInstance().playDown();var o=this.downGridData;this.downGridData=null;var t=this.checkMergeData(o),e=!1;Object.keys(t).forEach((function(o){t[o].merge&&(e=!0)})),e?this.loopMerge(o):o.row===this.row-1?this.gameFail():(this.generateColorGrid(),this.downFlag=!1)},n.loopMerge=function(o){var t=this,e=this.checkMergeData(o);this.mergeColorGrid(o,e).then((function(i){if(i.merge){if(e.bottom.merge?t.loopMergeList.unshift(e.bottom.gridData):t.loopMergeList.unshift(o),e.left.merge&&e.left.gridData.gridStatus===V.used)for(var n=e.left.gridData.row;n<t.row;n++){var r=t.gridList[n][e.left.gridData.column];r.gridStatus===V.used&&r!==t.downGridData&&t.loopMergeList.push(r)}if(e.right.merge&&e.right.gridData.gridStatus===V.used)for(var a=e.right.gridData.row;a<t.row;a++){var d=t.gridList[a][e.right.gridData.column];d.gridStatus===V.used&&d!==t.downGridData&&t.loopMergeList.push(d)}t.loopMergeList.length>0&&t.loopMerge(t.loopMergeList.shift())}else t.loopMergeList.length<1?(t.downFlag=!1,t.gameStatus===x.remove?(t.removingFlag=!1,t.onRemoveCancel()):t.generateColorGrid()):t.loopMerge(t.loopMergeList.shift())}))},n.checkMergeData=function(o){var t=this,e={bottom:{check:{row:-1,column:0},merge:!1,moveTween:null,gridData:null},left:{check:{row:0,column:-1},merge:!1,moveTween:null,gridData:null},right:{check:{row:0,column:1},merge:!1,moveTween:null,gridData:null}};return o.gridStatus===V.notUse||o.colorInfo.value>=this.maxValue||Object.keys(e).forEach((function(i){var n=o.row+e[i].check.row,r=o.column+e[i].check.column;if(!(n<0||n>=t.row||r<0||r>=t.column)){var a=t.gridList[n][r];a.gridStatus===V.notUse||a===t.downGridData||a.gridStatus===V.used&&a.colorInfo.value!==o.colorInfo.value||(e[i].gridData=a,e[i].merge=!0,e[i].moveTween=f(a.colorInfo.colorNode).to(t.aniColorGridMerge,{worldPosition:o.colorInfo.colorNode.getWorldPosition()}))}})),e},n.mergeColorGrid=function(o,t){var e=this;return new Promise((function(i,n){var r,d={merge:!1},s=[];if(Object.keys(t).forEach((function(o){null!==t[o].moveTween&&(s.push(t[o].moveTween),e.gameStatus===x.remove?e.removeColorGridsNode.insertChild(t[o].gridData.colorInfo.colorNode,0):e.colorGridsNode.insertChild(t[o].gridData.colorInfo.colorNode,0))})),s.length<1)i(d);else{d.merge=!0,s.length>=3?P.getInstance().playUnbeliveable():P.getInstance().playMerge();var l=o.colorInfo.value;s.forEach((function(){l*=2})),l=l>2048?2048:l,o.colorInfo.value=l,e.score+=l;var g=o.colorInfo.colorNode.getChildByPath("bg").getComponent(u),h=o.colorInfo.colorNode.getChildByPath("Num").getComponent(a);(r=f(e.node)).parallel.apply(r,s).parallel(f(g).to(e.aniColorGridMerge,{color:new c(e.colors[o.colorInfo.value].bgColor)}),f(h).to(e.aniColorGridMerge,{string:""+o.colorInfo.value,color:new c(e.colors[o.colorInfo.value].fontColor)})).call((function(){var o;Object.keys(t).forEach((function(o){t[o].merge&&(t[o].gridData.colorInfo.colorNode.destroy(),t[o].gridData.colorInfo=null,t[o].gridData.gridStatus=V.notUse)}));var n=[];if(t.left.merge){for(var r=[],a=t.left.gridData.row+1;a<e.row;a++){var s=e.gridList[a][t.left.gridData.column];s.gridStatus===V.used&&s!==e.downGridData&&r.push(s)}for(var l=0;l<r.length;l++){var g=r[l],u=e.gridList[t.left.gridData.row+l][t.left.gridData.column];g!==u&&(u.colorInfo=g.colorInfo,u.gridStatus=V.used,g.colorInfo=null,g.gridStatus=V.notUse,n.push(f(u.colorInfo.colorNode).to(e.aniColorGridDown,{worldPosition:u.gridNode.getWorldPosition()})))}}if(t.right.merge){for(var c=[],h=t.right.gridData.row+1;h<e.row;h++){var m=e.gridList[h][t.right.gridData.column];m.gridStatus===V.used&&m!==e.downGridData&&c.push(m)}for(var w=0;w<c.length;w++){var v=c[w],C=e.gridList[t.right.gridData.row+w][t.right.gridData.column];v!==C&&(C.colorInfo=v.colorInfo,C.gridStatus=V.used,v.colorInfo=null,v.gridStatus=V.notUse,n.push(f(C.colorInfo.colorNode).to(e.aniColorGridDown,{worldPosition:C.gridNode.getWorldPosition()})))}}if(t.bottom.merge){for(var p=[],N=t.bottom.gridData.row;N<e.row;N++){var S=e.gridList[N][t.bottom.gridData.column];S.gridStatus===V.used&&S!==e.downGridData&&p.push(S)}for(var G=0;G<p.length;G++){var D=p[G],I=e.gridList[t.bottom.gridData.row+G][t.bottom.gridData.column];D!==I&&(I.colorInfo=D.colorInfo,I.gridStatus=V.used,D.colorInfo=null,D.gridStatus=V.notUse,n.push(f(I.colorInfo.colorNode).to(e.aniColorGridDown,{worldPosition:I.gridNode.getWorldPosition()})))}}n.length<1?i(d):(o=f(e.node)).parallel.apply(o,n).call((function(){i(d)})).start()})).start()}}))},n.gameFail=function(){this.gameFailPopupNode.getChildByPath("Content/Info").getChildByPath("NowScore").getComponent(a).string=""+this.score,this.setGameStauts(x.end),this.saveScore(),I.clearDownGame(),P.getInstance().playGameFail()},n.onPauseBtnClick=function(){P.getInstance().playBtnClick(),this.gameStatus===x.running&&this.setGameStauts(x.pause)},n.onContinueBtnClick=function(){P.getInstance().playBtnClick(),this.setGameStauts(x.running)},n.onAgainBtnClick=function(){P.getInstance().playBtnClick(),this.initData()},n.onShareBtnClick=function(){P.getInstance().playBtnClick(),I.shareTelegram()},n.continueView_restart=function(){P.getInstance().playBtnClick(),I.clearDownGame(),this.initData(),this.hideCOntinueView()},n.continueView_continue=function(){P.getInstance().playBtnClick(),this.initData(!0),this.hideCOntinueView()},n.showContinueView=function(){this.continueView.active=!0;var o=this.continueView.getComponent(w)||this.continueView.addComponent(w);o.opacity=0,f(o).to(.25,{opacity:255},{easing:"quadOut"}).start()},n.hideCOntinueView=function(){var o=this,t=this.continueView.getComponent(w)||this.continueView.addComponent(w);f(t).to(.3,{opacity:0},{easing:"quadOut"}).call((function(){o.continueView.active=!1})).start()},n.removeColorGrid=function(o){var t=this;this.removingFlag||(this.removingFlag=!0,f(o.colorInfo.colorNode).to(this.aniColorGridRemove,{scale:C.ZERO}).call((function(){var e;if(o.colorInfo.colorNode.destroy(),o.colorInfo=null,o.gridStatus=V.notUse,o.row+1>=t.row||t.gridList[o.row+1][o.column].gridStatus===V.notUse)return t.removingFlag=!1,void t.onRemoveCancel();for(var i=[],n=[],r=o.row+1;r<t.row;r++){var a=t.gridList[r][o.column];if(a===t.downGridData)break;a.gridStatus===V.used&&n.push(a)}for(var d=0;d<n.length;d++){var s=n[d],l=t.gridList[o.row+d][o.column];s!==l&&(l.colorInfo=s.colorInfo,l.gridStatus=V.used,s.colorInfo=null,s.gridStatus=V.notUse,i.push(f(l.colorInfo.colorNode).to(t.aniColorGridDown,{worldPosition:l.gridNode.getWorldPosition()})))}(e=f(t.node)).parallel.apply(e,i).call((function(){for(var e,i=[],n=o.row;n<t.row;n++){var r=t.gridList[n][o.column];r.gridStatus===V.used&&r!==t.downGridData&&i.push(r)}var a=i.shift();(e=t.loopMergeList).push.apply(e,i),t.loopMerge(a)})).start()})).start())},n.onRemoveBtnClick=function(){var o=this;this.downFlag||this.adShowingFlag||this.gameStatus!==x.running||(this.setAdShowingFlag(!0),D.showVideoAd().then((function(t){if(t){o.setGameStauts(x.remove);for(var e=0;e<o.row;e++)for(var i=0;i<o.column;i++){var n=o.gridList[e][i];n.gridStatus!==V.notUse&&n!==o.downGridData&&(n.colorInfo.colorNode.getComponent(p).enabled=!0,o.removeColorGridsNode.addChild(n.colorInfo.colorNode))}}o.setAdShowingFlag(!1)})).catch((function(t){o.setAdShowingFlag(!1)})))},n.onRemoveCancel=function(){if(!this.removingFlag){for(var o=0;o<this.row;o++)for(var t=0;t<this.column;t++){var e=this.gridList[o][t];e.gridStatus!==V.notUse&&e!==this.downGridData&&(e.colorInfo.colorNode.getComponent(p).enabled=!1,this.colorGridsNode.addChild(e.colorInfo.colorNode))}this.setGameStauts(x.running)}},n.onNextValueBtnClick=function(){var o=this;this.downFlag||this.adShowingFlag||this.gameStatus!==x.running||(this.setAdShowingFlag(!0),D.showVideoAd().then((function(t){t&&(o.nextValueBtnNode.active=!1),o.setAdShowingFlag(!1)})).catch((function(t){o.setAdShowingFlag(!1)})))},n.backAction=function(){P.getInstance().playBtnClick(),this.saveGameData(),N.loadScene("down2048Start")},n.showInterstitialAd=function(o){o.active=!1,D.showInterstitialAd().then((function(t){o.active=!0})).catch((function(t){o.active=!0})),this.scheduleOnce((function(){o.active=!0}),1)},n.update=function(o){if(this.deltaTime=o,this.gameStatus===x.running&&!this.adShowingFlag&&this.autoDownFlag&&!this.adShowingFlag){var t=this.downGridData.colorInfo.colorNode.getWorldPosition();if(t.subtract3f(0,this.downSpeed*o,0),this.downGridData.colorInfo.colorNode.setWorldPosition(t),this.downGridData.row>0&&this.gridList[this.downGridData.row-1][this.downGridData.column].gridStatus===V.notUse&&v.distance(this.gridList[this.downGridData.row-1][this.downGridData.column].gridNode.getWorldPosition(),this.downGridData.colorInfo.colorNode.getWorldPosition())<=this.gridSize){var e=this.gridList[this.downGridData.row-1][this.downGridData.column];e.colorInfo=this.downGridData.colorInfo,e.gridStatus=V.used,this.downGridData.colorInfo=null,this.downGridData.gridStatus=V.notUse,this.downGridData=e,this.saveGameData()}this.downGridData.colorInfo.colorNode.getWorldPosition().y<=this.downGridData.gridNode.getWorldPosition().y&&this.downEnd()}},n.saveScore=function(){if(window.submitScore&&window.Telegram){var o=window.Telegram.WebApp.initDataUnsafe.user,t=o.id.toString(),e=o.username,i=o.photo_url;window.submitScore(t,{nickName:e,avatarUrl:i},this.score)}},n.saveGameData=function(){I.storeDownGame(this.gridList,this.downGridData,this.nextValue,this.nextValue2,this.nextColumnIdx)},n.restoreGameData=function(){var o=this,t=I.getDownGame();if(null!=t){var e=t.gridList;this.generateGrids_restore(e).then((function(){var i=S(0,o.gridsNode.getComponent(g).height/2+70,0),n=S(0,o.gridsNode.getComponent(g).height/2+100,0);o.colorNodePositions.push(i),o.colorNodePositions.push(n);for(var r=0;r<o.row;r++)for(var a=0;a<o.column;a++){var d=o.gridList[r][a],s=r*o.column+a,l=e[s];if(null!=l&&null!=l&&(l.row===r&&l.column===a&&l.gridStatus===V.used)){d.gridStatus=V.used;var u=l.colorInfo?l.colorInfo.value:0,c=o.createColorNode(u,d.gridNode.getWorldPosition());d.colorInfo={value:u,colorNode:c};var h=d.gridNode.getWorldPosition();c.setWorldPosition(h),c.setScale(1,1,1)}}var f=t.downData.row,m=t.downData.column;o.downGridData=o.gridList[f][m],o.nextColumnIdx=m,o.nextValue=t.nextValue1,o.nextValue2=t.nextValue2,o.colorNode1=o.createColorNode(o.nextValue,i),o.colorNode2=o.createColorNode(o.nextValue2,n),o.colorNode2.getComponent(w).opacity=0,o.setGameStauts(x.running),o.autoDownFlag=!0}))}},n.initGameData=function(){var o=this;this.generateGrids().then((function(){var t=S(0,o.gridsNode.getComponent(g).height/2+70,0),e=S(0,o.gridsNode.getComponent(g).height/2+100,0);o.colorNodePositions.push(t),o.colorNodePositions.push(e),null===o.nextValue&&(o.nextValue=o.randomGetNextValue(),o.nextValue2=o.randomGetNextValue()),o.colorNode1=o.createColorNode(o.nextValue,t),o.colorNode2=o.createColorNode(o.nextValue2,e),o.setGameStauts(x.running),o.generateColorGrid(),o.gameTipShowCount}))},e(i,[{key:"score",get:function(){return this._score},set:function(o){this._score=o,this.scoreLabel.string=""+this._score,o>this.gameBestScore&&(this.gameBestScore=o,this.bestScoreLabel.string=""+this.gameBestScore,I.storeBestScore(this.gameBestScore),this.saveScore())}},{key:"nextValue",get:function(){return this._nextValue},set:function(o){this._nextValue=o}},{key:"nextValue2",get:function(){return this._nextValue2},set:function(o){this._nextValue2=o}},{key:"nextColumnIdx",get:function(){return this._nextColumnIdx},set:function(o){this._nextColumnIdx=o}}]),i}(G))||b);i._RF.pop()}}}));

System.register("chunks:///_virtual/down2048Loading.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameLoadRes.ts"],(function(e){var t,n,r,o,s,i,c,a,u,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){s=e.cclegacy,i=e._decorator,c=e.ProgressBar,a=e.director,u=e.Component},function(e){l=e.GameLoadRes}],execute:function(){var d,h,p,g,f;s._RF.push({},"ee816rkKXJPQIbzmUK1F+Ob","down2048Loading",void 0);var y=i.ccclass,L=i.property;e("down2048Loading",(d=y("down2048Loading"),h=L(c),d((f=t((g=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return t=e.call.apply(e,[this].concat(s))||this,r(t,"progre",f,o(t)),t}n(t,e);var s=t.prototype;return s.start=function(){this.init()},s.init=function(){l.getInstance().startLoadAssert().then((function(){console.log("load game assert success........")})).catch((function(e){console.log("load game assert err:",e)})),this.startJindu()},s.startJindu=function(){this.schedule((function(){this.progre.progress+=.1,this.progre.progress>=.5&&(this.unschedule(this.schedule),this.jinduPause())}),.06,4,.2)},s.jinduPause=function(){var e=this;this.scheduleOnce((function(){e.loadScene()}),1)},s.loadScene=function(){this.schedule((function(){this.progre.progress+=.1,this.progre.progress>=1&&(this.unschedule(this.schedule),a.loadScene("down2048Start"))}),.1,5,.2)},t}(u)).prototype,"progre",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=g))||p));s._RF.pop()}}}));

System.register("chunks:///_virtual/Down2048RankView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Down2048AudioTool.ts"],(function(e){var n,t,o,r,i,a,l,c,s,u,p,d,g,h,f,m,y,w,C,b,I,v;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized,i=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){l=e.cclegacy,c=e._decorator,s=e.ScrollView,u=e.Node,p=e.Prefab,d=e.Label,g=e.instantiate,h=e.Vec3,f=e.Sprite,m=e.Color,y=e.tween,w=e.resources,C=e.SpriteFrame,b=e.Component,I=e.UITransform},function(e){v=e.Down2048AudioTool}],execute:function(){var k,P,B,N,S,R,T,z,D,L,V,U,x;l._RF.push({},"63ed2zkLaFOEIQoLzd90Wlo","Down2048RankView",void 0);var A=c.ccclass,F=c.property;e("Down2048RankView",(k=A("Down2048RankView"),P=F(s),B=F(u),N=F(p),S=F(u),R=F(u),k((D=n((z=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return n=e.call.apply(e,[this].concat(i))||this,o(n,"scrollView",D,r(n)),o(n,"UIPop",L,r(n)),o(n,"leaderboardItem",V,r(n)),o(n,"content",U,r(n)),o(n,"loading",x,r(n)),n.playId=null,n.index=null,n}t(n,e);var l=n.prototype;return l.onEnable=function(){this.init()},l.start=function(){},l.update=function(e){},l.init=function(){var e=i(a().mark((function e(){var n,t,o=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loading.active=!0,this.content.removeAllChildren(),this.scrollView.scrollToTop(0),window.Telegram&&(n=window.Telegram.WebApp.initDataUnsafe.user,t=n.id.toString(),this.playId=t),window.loadTopScores&&window.loadTopScores((function(e){e.forEach((function(e,n){}));var n=46*e.length;o.content.getComponent(I).setContentSize(220,n);var t=e;if(t){o.loading.active=!1;for(var r=0;r<t.length;r++)o.updateRankList(t[r],r);o.updateUseScore(t[o.index],o.index)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),l.updateUseScore=function(e,n){var t=this.node.getChildByPath("popUI/PlayerItem");t.getChildByName("rankLabel").getComponent(d).string=null!==n?String(n+1):"Not Ranked",e?(t.getChildByPath("userInfo/name").getComponent(d).string=e.playerInfo.nickName,t.getChildByPath("scoreNode/score").getComponent(d).string=e.score):(t.getChildByPath("userInfo/name").getComponent(d).string="Anonymous",t.getChildByPath("scoreNode/score").getComponent(d).string="0")},l.updateRankList=function(e,n){var t,o,r=g(this.leaderboardItem);(r.parent=this.content,r.position=new h(-510,-30-46*n,0),r.getChildByName("rankLabel").getComponent(d).string=String(n+1),r.removeChild(r.getChildByName("rank")),e.playerInfo.avatarUrl,e&&e.playerId==this.playId)?(r.getChildByPath("userInfo/name").getComponent(d).string=e.playerInfo.nickName||"Me",r.getChildByPath("bg").getComponent(f).color=new m(109,183,224,255),r.getChildByPath("scoreNode/score").getComponent(d).string=e&&e.score?e.score:0,this.index=n):(r.getChildByPath("userInfo/name").getComponent(d).string=e&&null!=(t=e.playerInfo)&&t.nickName?null==e||null==(o=e.playerInfo)?void 0:o.nickName:"",r.getChildByPath("scoreNode/score").getComponent(d).string=e&&e.score?e.score:0);y(r).to(1*n*.1,{position:new h(0,-30-46*n,0)}).start()},l.calback=function(){v.getInstance().playBtnClick(),this.node.active=!1},l.loadResourceSprite=function(e,n){w.load(n,C,(function(n,t){n?console.log(n):e.spriteFrame=t}))},n}(b)).prototype,"scrollView",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=n(z.prototype,"UIPop",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=n(z.prototype,"leaderboardItem",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=n(z.prototype,"content",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(z.prototype,"loading",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=z))||T));l._RF.pop()}}}));

System.register("chunks:///_virtual/down2048Start.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Down2048Tool.ts","./Down2048AudioTool.ts"],(function(n){var t,e,o,i,a,r,c,u,l,s,d;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,o=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){a=n.cclegacy,r=n._decorator,c=n.Node,u=n.director,l=n.Component},function(n){s=n.Down2048Tool},function(n){d=n.Down2048AudioTool}],execute:function(){var f,p,g,w,h,S,m,y,I;a._RF.push({},"72037aZSHVD1aa1lunc+0yN","down2048Start",void 0);var b=r.ccclass,v=r.property;n("down2048Start",(f=b("down2048Start"),p=v(c),g=v(c),w=v(c),f((m=t((S=function(n){function t(){for(var t,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return t=n.call.apply(n,[this].concat(a))||this,o(t,"soundOnIcon",m,i(t)),o(t,"soundOffIcon",y,i(t)),o(t,"rankView",I,i(t)),t}e(t,n);var a=t.prototype;return a.start=function(){this.refreshSoundStatus(),console.log("down2048Start start........")},a.update=function(n){},a.startGameAction=function(){d.getInstance().playBtnClick(),u.loadScene("down2048")},a.refreshSoundStatus=function(){1==s.getSoundFlag()?(this.soundOnIcon.active=!0,this.soundOffIcon.active=!1):(this.soundOnIcon.active=!1,this.soundOffIcon.active=!0)},a.soundGameAction=function(){1==s.getSoundFlag()?s.setSoundFlag(0):(s.setSoundFlag(1),d.getInstance().playBtnClick()),this.refreshSoundStatus()},a.shareGameAction=function(){d.getInstance().playBtnClick(),s.shareTelegram()},a.moreGameAction=function(){d.getInstance().playBtnClick(),window.Telegram&&window.Telegram.WebApp.openTelegramLink("https://t.me/bestpuzzlegame")},a.rankGameAction=function(){d.getInstance().playBtnClick(),this.rankView.active=!0},t}(l)).prototype,"soundOnIcon",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(S.prototype,"soundOffIcon",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(S.prototype,"rankView",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=S))||h));a._RF.pop()}}}));

System.register("chunks:///_virtual/Down2048Tool.ts",["cc"],(function(e){var t,n;return{setters:[function(e){t=e.cclegacy,n=e._decorator}],execute:function(){var o,l;t._RF.push({},"e31782sxKRLJK6NyiwaYtTA","Down2048Tool",void 0);var a=n.ccclass;n.property,e("Down2048Tool",a("Down2048Tool")(((l=function(){function e(){}return e.getBestScore=function(){var t=localStorage.getItem(e.DOWN2048BESTSCORE);return null==t||null==t?0:parseInt(t)},e.storeBestScore=function(t){t>e.getBestScore()&&localStorage.setItem(e.DOWN2048BESTSCORE,t.toString())},e.storeDownGame=function(e,t,n,o,l){if(!(null==e||null==e||e.length<=0)&&null!=t&&null!=t&&null!=n&&null!=o){for(var a=[],r=0;r<e.length;r++)for(var u=0;u<e[r].length;u++){var s=e[r][u],c=s.colorInfo?s.colorInfo.value:0,_=s.row+","+s.column+","+s.gridStatus+","+c;a.push(_)}var g=a.join("&"),i=t.row+","+t.column+","+t.gridStatus+","+(t.colorInfo?t.colorInfo.value:0),m=n+","+o+","+l;localStorage.setItem("__down2048GameData__",g),localStorage.setItem("__down2048DownData__",i),localStorage.setItem("__down2048NextValue__",m)}},e.getDownGame=function(){var e=localStorage.getItem("__down2048GameData__");if(null==e||null==e)return null;for(var t=[],n=e.split("&"),o=0;o<n.length;o++){var l=n[o].split(",");if(!(l.length<4)){var a=parseInt(l[0]),r=parseInt(l[1]),u=parseInt(l[2]),s=parseInt(l[3]);t.push({row:a,column:r,gridStatus:u,colorInfo:{value:s}})}}var c=localStorage.getItem("__down2048DownData__");if(null==c||null==c)return null;var _=c.split(",");if(_.length<4)return null;var g=parseInt(_[0]),i=parseInt(_[1]),m=parseInt(_[2]),w=parseInt(_[3]),I=localStorage.getItem("__down2048NextValue__");if(null==I||null==I)return null;var p=I.split(",");return p.length<3?null:{gridList:t,downData:{row:g,column:i,gridStatus:m,colorInfo:{value:w}},nextValue1:parseInt(p[0]),nextValue2:parseInt(p[1]),nextColumnIdx:parseInt(p[2])}},e.clearDownGame=function(){localStorage.removeItem("__down2048GameData__"),localStorage.removeItem("__down2048DownData__"),localStorage.removeItem("__down2048NextValue__")},e.getSoundFlag=function(){var e=localStorage.getItem("__soundFlag__");return null==e||null==e?1:parseInt(e)},e.setSoundFlag=function(e){localStorage.setItem("__soundFlag__",""+e)},e.shareTelegram=function(){if(window.Telegram){var e=window.Telegram.WebApp.initDataUnsafe.user.id.toString(),t="https://t.me/share/url?url="+encodeURIComponent("https://t.me/Down2048Bot/Down2048?startapp="+e)+"&text="+encodeURIComponent("I just discovered an awesome game — Down2048! Can you beat my score? Let's find out!");window.Telegram.WebApp.openTelegramLink(t)}},e}()).DOWN2048BESTSCORE="__down2048BestScore__",o=l))||o);t._RF.pop()}}}));

System.register("chunks:///_virtual/GameLoadPool.ts",["cc"],(function(i){var n,t,e,o;return{setters:[function(i){n=i.cclegacy,t=i._decorator,e=i.instantiate,o=i.NodePool}],execute:function(){var a,r;n._RF.push({},"cc804RiUKhOL4Or9ddERyAt","GameLoadPool",void 0);var s=t.ccclass;t.property,i("GameLoadPool",s("GameLoadPool")(((r=function(){function i(){this.ziDianPool={},this.ziDianPrefab={},this.ziDianPool={},this.ziDianPrefab={}}i.getInstance=function(){return null==i.instance&&(i.instance=new i),i.instance};var n=i.prototype;return n.setPrefab=function(i,n){this.ziDianPrefab[i]=n},n.getPrefab=function(i){return this.ziDianPrefab[i]},n.getPoolNode=function(i,n,t){var a,r,s;if("string"==typeof i&&(a=this.ziDianPrefab[i],r=i),this.ziDianPool.hasOwnProperty(r)){var c=this.ziDianPool[r];if(c.size()>0)s=c.get();else{if(!a)return null;s=e(a)}}else{if(!a)return null;var l=new o;this.ziDianPool[r]=l,s=e(a)}return n&&(s.parent=n,s.active=!0,t&&(s.position=t)),s},n.huiShouNode=function(i,n){if(void 0===n&&(n=!1),i){var t=i.name,e=null;i.active=n,this.ziDianPool.hasOwnProperty(t)?e=this.ziDianPool[t]:(e=new o,this.ziDianPool[t]=e),e.put(i)}},i}()).instance=null,a=r))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameLoadRes.ts",["cc","./GameLoadPool.ts","./Down2048AudioTool.ts","./Down2048GameConfig.ts"],(function(n){var o,e,a,t,c,s,i,r;return{setters:[function(n){o=n.cclegacy,e=n._decorator,a=n.assetManager,t=n.JsonAsset,c=n.Prefab},function(n){s=n.GameLoadPool},function(n){i=n.Down2048AudioTool},function(n){r=n.Down2048GameConfig}],execute:function(){var u,f;o._RF.push({},"c0debAxQpJKLIvgfJuLaaQW","GameLoadRes",void 0);var l=e.ccclass;e.property,n("GameLoadRes",l("GameLoadRes")(((f=function(){function n(){this.bundleName="down2048",this.gameConfig={}}n.getInstance=function(){return null==n.instance&&(n.instance=new n),n.instance};var o=n.prototype;return o.startLoadAssert=function(){var n=this;return new Promise((function(o,e){n.loadGameConfig().then((function(){n.loadAssert().then((function(){Object.keys(n.gameConfig.config).forEach((function(o){"//"!==o&&(r[o]=n.gameConfig.config[o])})),n.loadAudioAssert(),o(0)})).catch((function(n){console.log("load assert err:",n),e(n)}))})).catch((function(n){console.log("load game config err:",n),e(n)}))}))},o.loadAudioAssert=function(){i.getInstance().loadAssert().then((function(){console.log("load audio assert success........")}))},o.loadGameConfig=function(){var n=this;return new Promise((function(o,e){a.loadBundle(n.bundleName,(function(a,c){a||c.load("down2048GameConfig",t,(function(a,t){if(a)return console.log("load gameconfig err:",a),void e(a);n.gameConfig=t.json,console.log("gameconfig:",n.gameConfig),console.log("load gameconfig succes."),o(0)}))}))}))},o.loadAssert=function(){var n=this;return new Promise((function(o,e){var t=[],i={gridPrefab:"prefabs/Grid",columnBGPrefab:"prefabs/ColumnBG"};Object.keys(i).forEach((function(o){var e=i[o];t.push(new Promise((function(t,i){a.loadBundle(n.bundleName,(function(n,a){n||a.load(e,c,(function(n,e){if(n)return console.log("load err:",n),void i(n);s.getInstance().setPrefab(o,e),t(0)}))}))})))})),Promise.all([].concat(t)).then((function(n){o(0)}))}))},n}()).instance=null,u=f))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Down2048AudioManager.ts","./Down2048AudioTool.ts","./Down2048ColorGraphics.ts","./Down2048GameConfig.ts","./Down2048GameManager.ts","./Down2048RankView.ts","./Down2048Tool.ts","./GameLoadPool.ts","./GameLoadRes.ts","./SDKManager.ts","./down2048Loading.ts","./down2048Start.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/SDKManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,o;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy,o=t.sys}],execute:function(){e._RF.push({},"cb2b3ellaBOu5vg2OD6khNS","SDKManager",void 0);var r=t("SDKManager",function(){function t(){}return t.recordEnterGameTime=function(){null===t.enterGameTime&&(t.enterGameTime=(new Date).getTime())},t.initData=function(n){console.log("sys.platform",o.platform),t.recordEnterGameTime(),Object.keys(n).forEach((function(e){"//"!==e&&(t[e]=n[e])})),t.isWX&&"undefined"!=typeof wx&&void 0!==wx.createInterstitialAd&&null===t.wxInterstitialAd&&(t.wxInterstitialAd=wx.createInterstitialAd({adUnitId:t.wxInterstitialAdId}))},t.showVideoAd=function(){return new Promise((function(t,n){}))},t.showInterstitialAd=function(){return new Promise((function(t,n){(new Date).getTime()}))},t.showBottomBannerAd=function(n){return void 0===n&&(n=null),new Promise((function(e,r){try{if(null!==n&&n<110)return console.log("底部空间不足展示banner!",n,110),void e(!1);if(t.isWX){if("undefined"==typeof wx||void 0===wx.createCustomAd)return void r("未定义wx或wx.createCustomAd。");if(null!==t.bottomBannerAd)return void t.bottomBannerAd.show().then((function(){e(!0)})).catch((function(n){console.log("banner广告组件出现问题",n),t.bottomBannerAd.destroy(),t.bottomBannerAd=null,r(n)}));var i=wx.getWindowInfo(),l=i.windowWidth,a=i.windowHeight,d=wx.createCustomAd({adIntervals:180,adUnitId:t.wxCustomAdId,style:{width:300,left:(l-300)/2,top:a-100-10}});t.bottomBannerAd=d,d.onError((function(n){console.error(n.errMsg),t.bottomBannerAd.destroy(),t.bottomBannerAd=null})),d.show().then((function(){e(!0)}))}else t.isDY?r(""):o.platform===o.Platform.MOBILE_BROWSER||o.platform===o.Platform.DESKTOP_BROWSER||o.platform===o.Platform.EDITOR_PAGE?e(!0):e(!1)}catch(t){console.error("showBannerAd",t),r(t)}}))},t.hideBottomBanner=function(){null!==t.bottomBannerAd&&t.bottomBannerAd.hide()},n(t,null,[{key:"isWX",get:function(){return o.platform===o.Platform.WECHAT_GAME||o.platform===o.Platform.WECHAT_MINI_PROGRAM}},{key:"isDY",get:function(){return o.platform===o.Platform.BYTEDANCE_MINI_GAME}}]),t}());r.wxVideoAdId=null,r.dyVideoAdId=null,r.wxInterstitialAdId=null,r.dyInterstitialAdId=null,r.wxCustomAdId=null,r.dyBannerAdId=null,r.firstInterstitialAdTime=30,r.interstitialAdInterval=120,r.interstitialAdNumLimit=15,r.wxInterstitialAd=null,r.enterGameTime=null,r.interstitialAdShowTime=0,r.interstitialAdShowCount=0,r.bottomBannerAd=null,r.wxUserInfoButton=null,e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});